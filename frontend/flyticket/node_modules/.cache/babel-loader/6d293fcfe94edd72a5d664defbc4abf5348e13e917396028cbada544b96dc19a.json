{"ast":null,"code":"import { NextByteAssertionError } from \"../errors\";\nimport { decodePDFRawStream } from \"../streams/decode\";\nimport CharCodes from \"../syntax/CharCodes\";\n// TODO: See how line/col tracking affects performance\nvar ByteStream = /** @class */function () {\n  function ByteStream(bytes) {\n    this.idx = 0;\n    this.line = 0;\n    this.column = 0;\n    this.bytes = bytes;\n    this.length = this.bytes.length;\n  }\n  ByteStream.prototype.moveTo = function (offset) {\n    this.idx = offset;\n  };\n  ByteStream.prototype.next = function () {\n    var byte = this.bytes[this.idx++];\n    if (byte === CharCodes.Newline) {\n      this.line += 1;\n      this.column = 0;\n    } else {\n      this.column += 1;\n    }\n    return byte;\n  };\n  ByteStream.prototype.assertNext = function (expected) {\n    if (this.peek() !== expected) {\n      throw new NextByteAssertionError(this.position(), expected, this.peek());\n    }\n    return this.next();\n  };\n  ByteStream.prototype.peek = function () {\n    return this.bytes[this.idx];\n  };\n  ByteStream.prototype.peekAhead = function (steps) {\n    return this.bytes[this.idx + steps];\n  };\n  ByteStream.prototype.peekAt = function (offset) {\n    return this.bytes[offset];\n  };\n  ByteStream.prototype.done = function () {\n    return this.idx >= this.length;\n  };\n  ByteStream.prototype.offset = function () {\n    return this.idx;\n  };\n  ByteStream.prototype.slice = function (start, end) {\n    return this.bytes.slice(start, end);\n  };\n  ByteStream.prototype.position = function () {\n    return {\n      line: this.line,\n      column: this.column,\n      offset: this.idx\n    };\n  };\n  ByteStream.of = function (bytes) {\n    return new ByteStream(bytes);\n  };\n  ByteStream.fromPDFRawStream = function (rawStream) {\n    return ByteStream.of(decodePDFRawStream(rawStream).decode());\n  };\n  return ByteStream;\n}();\nexport default ByteStream;","map":{"version":3,"names":["NextByteAssertionError","decodePDFRawStream","CharCodes","ByteStream","bytes","idx","line","column","length","prototype","moveTo","offset","next","byte","Newline","assertNext","expected","peek","position","peekAhead","steps","peekAt","done","slice","start","end","of","fromPDFRawStream","rawStream","decode"],"sources":["C:\\Users\\Uzer\\Desktop\\works\\flyticket\\frontend\\flyticket\\node_modules\\pdf-lib\\src\\core\\parser\\ByteStream.ts"],"sourcesContent":["import { NextByteAssertionError } from 'src/core/errors';\r\nimport PDFRawStream from 'src/core/objects/PDFRawStream';\r\nimport { decodePDFRawStream } from 'src/core/streams/decode';\r\nimport CharCodes from 'src/core/syntax/CharCodes';\r\n\r\n// TODO: See how line/col tracking affects performance\r\nclass ByteStream {\r\n  static of = (bytes: Uint8Array) => new ByteStream(bytes);\r\n\r\n  static fromPDFRawStream = (rawStream: PDFRawStream) =>\r\n    ByteStream.of(decodePDFRawStream(rawStream).decode());\r\n\r\n  private readonly bytes: Uint8Array;\r\n  private readonly length: number;\r\n\r\n  private idx = 0;\r\n  private line = 0;\r\n  private column = 0;\r\n\r\n  constructor(bytes: Uint8Array) {\r\n    this.bytes = bytes;\r\n    this.length = this.bytes.length;\r\n  }\r\n\r\n  moveTo(offset: number): void {\r\n    this.idx = offset;\r\n  }\r\n\r\n  next(): number {\r\n    const byte = this.bytes[this.idx++];\r\n    if (byte === CharCodes.Newline) {\r\n      this.line += 1;\r\n      this.column = 0;\r\n    } else {\r\n      this.column += 1;\r\n    }\r\n    return byte;\r\n  }\r\n\r\n  assertNext(expected: number): number {\r\n    if (this.peek() !== expected) {\r\n      throw new NextByteAssertionError(this.position(), expected, this.peek());\r\n    }\r\n    return this.next();\r\n  }\r\n\r\n  peek(): number {\r\n    return this.bytes[this.idx];\r\n  }\r\n\r\n  peekAhead(steps: number) {\r\n    return this.bytes[this.idx + steps];\r\n  }\r\n\r\n  peekAt(offset: number) {\r\n    return this.bytes[offset];\r\n  }\r\n\r\n  done(): boolean {\r\n    return this.idx >= this.length;\r\n  }\r\n\r\n  offset(): number {\r\n    return this.idx;\r\n  }\r\n\r\n  slice(start: number, end: number): Uint8Array {\r\n    return this.bytes.slice(start, end);\r\n  }\r\n\r\n  position(): { line: number; column: number; offset: number } {\r\n    return { line: this.line, column: this.column, offset: this.idx };\r\n  }\r\n}\r\n\r\nexport default ByteStream;\r\n"],"mappings":"AAAA,SAASA,sBAAsB,QAAE;AAEjC,SAASC,kBAAkB,QAAE;AAC7B,OAAOC,SAAS;AAEhB;AACA,IAAAC,UAAA;EAaE,SAAAA,WAAYC,KAAiB;IAJrB,KAAAC,GAAG,GAAG,CAAC;IACP,KAAAC,IAAI,GAAG,CAAC;IACR,KAAAC,MAAM,GAAG,CAAC;IAGhB,IAAI,CAACH,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACI,MAAM,GAAG,IAAI,CAACJ,KAAK,CAACI,MAAM;EACjC;EAEAL,UAAA,CAAAM,SAAA,CAAAC,MAAM,GAAN,UAAOC,MAAc;IACnB,IAAI,CAACN,GAAG,GAAGM,MAAM;EACnB,CAAC;EAEDR,UAAA,CAAAM,SAAA,CAAAG,IAAI,GAAJ;IACE,IAAMC,IAAI,GAAG,IAAI,CAACT,KAAK,CAAC,IAAI,CAACC,GAAG,EAAE,CAAC;IACnC,IAAIQ,IAAI,KAAKX,SAAS,CAACY,OAAO,EAAE;MAC9B,IAAI,CAACR,IAAI,IAAI,CAAC;MACd,IAAI,CAACC,MAAM,GAAG,CAAC;KAChB,MAAM;MACL,IAAI,CAACA,MAAM,IAAI,CAAC;;IAElB,OAAOM,IAAI;EACb,CAAC;EAEDV,UAAA,CAAAM,SAAA,CAAAM,UAAU,GAAV,UAAWC,QAAgB;IACzB,IAAI,IAAI,CAACC,IAAI,EAAE,KAAKD,QAAQ,EAAE;MAC5B,MAAM,IAAIhB,sBAAsB,CAAC,IAAI,CAACkB,QAAQ,EAAE,EAAEF,QAAQ,EAAE,IAAI,CAACC,IAAI,EAAE,CAAC;;IAE1E,OAAO,IAAI,CAACL,IAAI,EAAE;EACpB,CAAC;EAEDT,UAAA,CAAAM,SAAA,CAAAQ,IAAI,GAAJ;IACE,OAAO,IAAI,CAACb,KAAK,CAAC,IAAI,CAACC,GAAG,CAAC;EAC7B,CAAC;EAEDF,UAAA,CAAAM,SAAA,CAAAU,SAAS,GAAT,UAAUC,KAAa;IACrB,OAAO,IAAI,CAAChB,KAAK,CAAC,IAAI,CAACC,GAAG,GAAGe,KAAK,CAAC;EACrC,CAAC;EAEDjB,UAAA,CAAAM,SAAA,CAAAY,MAAM,GAAN,UAAOV,MAAc;IACnB,OAAO,IAAI,CAACP,KAAK,CAACO,MAAM,CAAC;EAC3B,CAAC;EAEDR,UAAA,CAAAM,SAAA,CAAAa,IAAI,GAAJ;IACE,OAAO,IAAI,CAACjB,GAAG,IAAI,IAAI,CAACG,MAAM;EAChC,CAAC;EAEDL,UAAA,CAAAM,SAAA,CAAAE,MAAM,GAAN;IACE,OAAO,IAAI,CAACN,GAAG;EACjB,CAAC;EAEDF,UAAA,CAAAM,SAAA,CAAAc,KAAK,GAAL,UAAMC,KAAa,EAAEC,GAAW;IAC9B,OAAO,IAAI,CAACrB,KAAK,CAACmB,KAAK,CAACC,KAAK,EAAEC,GAAG,CAAC;EACrC,CAAC;EAEDtB,UAAA,CAAAM,SAAA,CAAAS,QAAQ,GAAR;IACE,OAAO;MAAEZ,IAAI,EAAE,IAAI,CAACA,IAAI;MAAEC,MAAM,EAAE,IAAI,CAACA,MAAM;MAAEI,MAAM,EAAE,IAAI,CAACN;IAAG,CAAE;EACnE,CAAC;EAjEMF,UAAA,CAAAuB,EAAE,GAAG,UAACtB,KAAiB;IAAK,WAAID,UAAU,CAACC,KAAK,CAAC;EAArB,CAAqB;EAEjDD,UAAA,CAAAwB,gBAAgB,GAAG,UAACC,SAAuB;IAChD,OAAAzB,UAAU,CAACuB,EAAE,CAACzB,kBAAkB,CAAC2B,SAAS,CAAC,CAACC,MAAM,EAAE,CAAC;EAArD,CAAqD;EA+DzD,OAAA1B,UAAC;CAAA,CAnED;AAqEA,eAAeA,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}